import{H as v,F as C}from"./Footer-B_50z3Ql.js";import{C as p,o,c as r,a as t,t as c,n as A,b as x,Z as j,z as m,k as f,F as _,s as q,m as T}from"./app-sxmKPskq.js";import{g as P,t as n}from"./utilities-C5P9uAkL.js";import{P as I}from"./PrimaryCustomButton-BiAcJe8T.js";import{_ as g}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as O}from"./ResponsiveNavLink-Bqu6smUF.js";const $={name:"Ticket",components:{PrimaryCustomButton:I},props:{id:{type:Number,required:!0},title:{type:String,default:"default title"},photo:{type:String,default:""},price:{type:String,default:"default price"},description:{type:String,default:"default description"},color:{type:String,default:"black"},index:{type:String,default:null},quantity:{type:Number,default:1},qrCode:{type:Object,default:{}},stripeItemPrice:String},computed:{user(){return this.$page.props.auth.user}},data(){return{showArticle:!0,ticketAmount:null}},mounted(){this.ticketAmount=this.quantity},methods:{getImgPath:P,async updateTicket(i){if(this.ticketAmount<=1&&i=="substract")return n("Une quantité minimum est requise.","error");try{const e=await p.post(`/cart/update/${this.id}`,{method:i});e.data.message=="success"?(i=="add"?this.ticketAmount++:this.ticketAmount--,n("Quantité modifiée.","success"),this.$emit("update-cart",i,this.price)):e.data.message=="error"&&n("Erreur lors de la modification de la quantité.","error")}catch(e){n("Erreur lors de la mise à jour du billet","error"),console.error(e)}},async deleteTicket(){try{const i=await p.post(`/cart/delete/${this.id}`);i.data.message=="success"?(this.showArticle=!1,n("Billet supprimé.","success"),this.$emit("delete-item",this.id)):i.data.message=="error"&&n("Erreur lors de la suppression du billet.","error")}catch(i){n("Erreur lors de l'effacement du billet","error"),console.error(i)}}}},S={class:"flex w-fit gap-10"},N={class:"flex flex-col w-fit gap-10"},H=["src"],B={class:"flex flex-col w-fit gap-4"},F={class:"font-bold text-md"},M={class:"flex flex-col w-fit gap-4"},E=t("h3",{class:"font-bold text-md"},"Coût total",-1),D={class:"flex flex-col w-fit gap-4"},V=t("h3",{class:"font-bold text-md"},"Modifier ma commande",-1),U={class:"flex w-full gap-2 justify-between"},z=["name"],L=["name"],Q=["name"];function R(i,e,s,b,d,l){return d.showArticle?(o(),r("article",{key:0,class:A(`flex flex-col mb-5 md:flex-row gap-2 w-80 md:w-full md:gap-10 rounded-lg justify-between shadow-lg shadow-${s.color}-500/50 md:h-40 p-2 md:p-10`)},[t("div",S,[t("div",N,[t("img",{src:l.getImgPath(s.photo),alt:"photo de l'offre",class:"rounded-lg w-32 h-32 object-cover"},null,8,H)]),t("div",B,[t("h3",F,"Offre "+c(s.title),1),t("p",null,c(s.description),1),t("p",null,"Prix unitaire: "+c(s.price)+" €",1)])]),t("div",M,[E,t("p",null,"Quantité: "+c(d.ticketAmount),1),t("p",null,"Prix total: "+c(d.ticketAmount*s.price)+" €",1)]),t("div",D,[V,t("div",U,[t("button",{name:`decrementTicket-${s.index}`,class:"bg-yellow-200 px-2 flex justify-center",onClick:e[0]||(e[0]=u=>l.updateTicket("substract"))},"Retirer 1",8,z),t("button",{name:`incrementTicket-${s.index}`,class:"bg-yellow-200 px-2 flex justify-center",onClick:e[1]||(e[1]=u=>l.updateTicket("add"))},"Ajouter 1",8,L)]),t("button",{name:`deleteTicket-${s.index}`,class:"bg-red-300 px-2 flex justify-center",onClick:e[2]||(e[2]=u=>l.deleteTicket())},"Supprimer commande",8,Q)])],2)):x("",!0)}const Z=g($,[["render",R]]),G={name:"Cart",components:{Header:v,Footer:C,Head:j,TicketCardMini:Z,ResponsiveNavLink:O},props:{cart:Object,ticketlist:Array,ticketsids:Array},computed:{user(){return this.$page.props.auth.user}},data(){return{itemsInCart:null,totalOrder:null}},mounted(){let i=0;for(let e=0;e<this.ticketlist.length;e++)i=i+this.ticketlist[e].quantity*this.ticketlist[e].price;this.totalOrder=i},methods:{updateCart(i,e){i=="add"?this.totalOrder=this.totalOrder+Number(e):this.totalOrder=this.totalOrder-Number(e)},deleteItem(i){console.log(arg1)}}},J={class:"h-fit w-full overflow-hidden"},K={class:"h-screen w-full relative"},W=t("img",{src:"../../public/assets/st-quentin.jpg",alt:"Drapeau des jeux olympiques de Paris 2024",class:"object-cover h-full w-full"},null,-1),X={class:"absolute gap-4 md:p-0 p-2 top-36 md:top-1/4 w-full md:h-screen flex flex-col items-center md:items-start md:flex-row md:justify-evenly"},Y={key:0,class:"w-full md:w-4/6 md:h-4/6 md:p-10 rounded-xl flex flex-col bg-white"},tt={key:0,class:"text-xl font-bold p-2"},et={class:"flex w-92 md:w-full h-96 flex-col items-center md:items-start gap-2 overflow-y-scroll mb-2 md:pr-6"},st={key:1,class:"w-3/4 h-fit md:w-3/6 p-10 rounded-xl flex flex-col items-center gap-6 bg-white"},it=t("h1",{class:"text-xl font-bold"},"Votre panier est vide",-1),ot=[it],lt={key:2,class:"w-full h-52 md:h-4/6 md:w-1/6 p-10 rounded-xl flex flex-col gap-6 bg-white"},rt=t("h2",{class:"text-xl font-bold"},"Ma facture",-1),at=["href"],nt={key:3,class:"w-3/4 h-fit md:w-1/6 p-10 rounded-xl flex flex-col gap-6 bg-white"},ct=t("h2",{class:"text-xl font-bold"},"Aucune facture",-1),dt=[ct];function ut(i,e,s,b,d,l){const u=m("Head"),k=m("Header"),w=m("TicketCardMini"),y=m("Footer");return o(),r(_,null,[f(u,{title:"Panier"}),t("div",J,[t("div",K,[f(k,{ticketsCount:s.ticketlist?s.ticketlist.length:0},null,8,["ticketsCount"]),W,t("main",X,[s.cart!=null?(o(),r("div",Y,[s.ticketlist?(o(),r("h1",tt,"Mon panier ("+c(s.ticketlist.length)+" billet)",1)):x("",!0),t("div",et,[(o(!0),r(_,null,q(s.ticketlist,(a,h)=>(o(),T(w,{id:s.ticketsids[h],title:a.title,photo:a.photo,price:a.price,description:a.description,color:a.color,stripeItemPrice:a.stripe_item_price,quantity:a.quantity,index:h,onUpdateCart:l.updateCart,onDeleteItem:l.deleteItem},null,8,["id","title","photo","price","description","color","stripeItemPrice","quantity","index","onUpdateCart","onDeleteItem"]))),256))])])):(o(),r("div",st,ot)),s.cart!=null?(o(),r("div",lt,[rt,t("div",null,[t("p",null,"Total: "+c(d.totalOrder),1)]),t("a",{class:"bg-amber-200 p-4 rounded-sm hover:bg-amber-400 transition ease-in-out duration-300",href:`/cart/${l.user.id}/checkout/${s.cart.id}`}," Payer ma commande ",8,at)])):(o(),r("div",nt,dt))])]),f(y)])],64)}const gt=g(G,[["render",ut]]);export{gt as default};

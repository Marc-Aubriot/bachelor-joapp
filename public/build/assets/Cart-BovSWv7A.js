import{H as y,F as b}from"./Footer-DS1P6-HM.js";import{C as v,o,c as i,a as t,t as r,n as k,Z as P,B as n,k as d,b as C,F as u,s as q,m as S}from"./app-vCdMRrgH.js";import{g as j,t as m}from"./utilities-a6mkfDEO.js";import{P as B}from"./PrimaryCustomButton-Dydn6MVB.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as H}from"./ResponsiveNavLink-DMk6n7p1.js";const $={name:"Ticket",components:{PrimaryCustomButton:B},props:{id:{type:Number,required:!0},title:{type:String,default:"default title"},photo:{type:String,default:""},price:{type:String,default:"default price"},description:{type:String,default:"default description"},color:{type:String,default:"black"},quantity:{type:String,default:1},qrCode:{type:Object,default:{}},stripeItemPrice:String},computed:{user(){return this.$page.props.auth.user}},methods:{getImgPath:j,async addToShoppingList(){try{const s=await v.post("/addtocart",{stripe_item_price:this.stripeItemPrice});m("Billet enregistré.","success")}catch(s){m("Erreur lors de l'enregistrement du illet","error"),console.error(s)}}}},F={class:"flex w-fit gap-10"},I={class:"flex flex-col w-fit gap-10"},M=["src"],T={class:"flex flex-col w-fit gap-4"},A={class:"font-bold text-md"},N={class:"flex flex-col w-fit gap-4"},V=t("h3",{class:"font-bold text-md"},"Coût total",-1),L=t("div",{class:"flex flex-col w-fit gap-4"},[t("h3",{class:"font-bold text-md"},"Modifier ma commande"),t("p",null,"- + Valider"),t("p",null,"Supprimer commande")],-1);function O(s,a,e,p,_,c){return o(),i("article",{class:k(`flex flex-col mb-5 md:flex-row gap-2 w-80 md:w-full md:gap-10 rounded-lg justify-between shadow-lg shadow-${e.color}-500/50 md:h-40 p-2 md:p-10`)},[t("div",F,[t("div",I,[t("img",{src:c.getImgPath(e.photo),alt:"photo de l'offre",class:"rounded-lg w-32 h-32 object-cover"},null,8,M)]),t("div",T,[t("h3",A,"Offre "+r(e.title),1),t("p",null,r(e.description),1),t("p",null,"Prix unitaire: "+r(e.price)+" €",1)])]),t("div",N,[V,t("p",null,"Quantité: "+r(e.quantity),1),t("p",null,"Prix total: "+r(e.quantity*e.price)+" €",1)]),L],2)}const D=f($,[["render",O]]),E={name:"Cart",components:{Header:y,Footer:b,Head:P,TicketCardMini:D,ResponsiveNavLink:H},props:{cart:Object,ticketlist:Array},computed:{user(){return this.$page.props.auth.user},totalAmount(){let s=0;for(let a=0;a<this.ticketlist.length;a++)s=s+this.ticketlist[a].quantity*this.ticketlist[a].price;return s}}},z={class:"h-fit w-full overflow-hidden"},Q={class:"h-screen w-full relative"},R=t("img",{src:"../../public/assets/st-quentin.jpg",alt:"Drapeau des jeux olympiques de Paris 2024",class:"object-cover h-full w-full"},null,-1),Z={class:"absolute gap-4 md:p-0 p-2 top-36 md:top-1/4 w-full md:h-screen flex flex-col items-center md:items-start md:flex-row md:justify-evenly"},G={key:0,class:"w-full md:w-4/6 md:h-4/6 md:p-10 rounded-xl flex flex-col bg-white"},J={key:0,class:"text-xl font-bold p-2"},K={class:"flex w-92 md:w-full h-96 flex-col items-center md:items-start gap-2 overflow-y-scroll mb-2 md:pr-6"},U={key:1,class:"w-3/4 h-fit md:w-3/6 p-10 rounded-xl flex flex-col items-center gap-6 bg-white"},W=t("h1",{class:"text-xl font-bold"},"Votre panier est vide",-1),X=[W],Y={key:2,class:"w-full h-52 md:h-4/6 md:w-1/6 p-10 rounded-xl flex flex-col gap-6 bg-white"},tt=t("h2",{class:"text-xl font-bold"},"Ma facture",-1),et=["href"],ot={key:3,class:"w-3/4 h-fit md:w-1/6 p-10 rounded-xl flex flex-col gap-6 bg-white"},st=t("h2",{class:"text-xl font-bold"},"Aucune facture",-1),lt=[st];function it(s,a,e,p,_,c){const h=n("Head"),x=n("Header"),g=n("TicketCardMini"),w=n("Footer");return o(),i(u,null,[d(h,{title:"Panier"}),t("div",z,[t("div",Q,[d(x),R,t("main",Z,[e.cart!=null?(o(),i("div",G,[e.ticketlist?(o(),i("h1",J,"Mon panier ("+r(e.ticketlist.length)+" billet)",1)):C("",!0),t("div",K,[(o(!0),i(u,null,q(e.ticketlist,(l,rt)=>(o(),S(g,{id:l.id,title:l.title,photo:l.photo,price:l.price,description:l.description,color:l.color,stripeItemPrice:l.stripe_item_price,quantity:l.quantity},null,8,["id","title","photo","price","description","color","stripeItemPrice","quantity"]))),256))])])):(o(),i("div",U,X)),e.cart!=null?(o(),i("div",Y,[tt,t("div",null,[t("p",null,"Total: "+r(c.totalAmount),1)]),t("a",{class:"bg-amber-200 p-4 rounded-sm hover:bg-amber-400 transition ease-in-out duration-300",href:`/cart/${c.user.id}/checkout/${e.cart.id}`}," Payer ma commande ",8,et)])):(o(),i("div",ot,lt))])]),d(w)])],64)}const ft=f(E,[["render",it]]);export{ft as default};
